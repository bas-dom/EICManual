### 诊断管理

**进入诊断管理页面，左侧显示的是点位的分类，点击任意点名，右侧的列表内都会先是选中点的诊断信息，主要功能如下**：

1. 点击新建按钮弹出新建诊断的窗口，其中诊断名称、诊断脚本是必填的，对诊断的描述可以选填。 诊断脚本需要书写一段代码，如：  

   ```
   def main():
       if get_act_time().minute<10:
           if get_last_update_delta_minutes_of_this_point()>30:
               x = get_avg_data_of_last_hour('bjjw_18_t')
           else:
               x = get_last_value()
           return round(x,1) if x else x
       else:
           return None
   ```

   确保信息填写正确后，可以点击在线测试，右侧会显示执行后的信息（如果填写错误，页面会显示提示，并且右侧会一直显示loading）。最后点击确认新建诊断。

2. 选中左侧列表内的任意一个点位后，点击删除（**点击删除不会弹出确认删除对话框），删除后数据无法找回。**

3. 选中左侧列表内任意一个点位后，点击配置，弹出诊断配置窗口，选择是否开启选中点位的诊断，然后点击确认完成操作。

4. **右侧默认显示一个诊断列表，并且用户点击左侧列表内的点后详细展示这个点的状态曲线图 ：**

5. 默认显示的列表中，点击列标题为 **最后一次执行耗费时间 **后面的三角符号，可以根据上一次的执行的耗时时间，对诊断列表进行排序。

6. 用户选择某个点的详细状态曲线后，点击右侧的修改按钮，弹出修改诊断的窗口，内容可参考 1 中的内容。
7. 点击前一天、后一天、今天选择某一天的的诊断曲线图。



